---

- name: Create Unifi folder
  file:
    path: "{{ unifi_docker_folder }}"
    state: directory

- name: Create Unifi container
  docker_container:
    name: unifi
    image: "jacobalberty/unifi:{{ unifi_docker_tag }}"
    state: started
    restart_policy: unless-stopped
    init: true
    network_mode: host
    published_ports:
      - '3478:3478/udp'
      - '8080:8080'
      - '8443:8443'
      - '8880:8880'
      - '6789:6789'
      - '10001:10001/udp'
    volumes:
      - "{{ unifi_docker_folder }}:/unifi"
    env:
      TZ: "{{ unifi_docker_tz }}"
